package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.event.events.PacketEvent;
import com.gamesense.api.util.misc.MessageBus;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import com.mojang.realmsclient.gui.ChatFormatting;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.init.SoundEvents;
import net.minecraft.network.play.server.SPacketSoundEffect;

@Module.Declaration(name = "ChorusNotify", category = Category.Exploits)
public class ChorusNotify extends Module {
	
	@EventHandler
    private final Listener<PacketEvent.Receive> chorusListener = new Listener<>(event -> {
    	
    	if(mc.world != null || mc.player != null) {
    		if(PacketEvent.getPacket() instanceof SPacketSoundEffect) {
        		SPacketSoundEffect packet = (SPacketSoundEffect) PacketEvent.getPacket();
        		if (packet.getSound() == SoundEvents.ITEM_CHORUS_FRUIT_TELEPORT) {
        			MessageBus.sendClientPrefixMessage("A player has chorused to " + ChatFormatting.GREEN + "X: " + packet.getX() + ChatFormatting.GRAY + ", " +
                    ChatFormatting.GREEN + "Y: " + packet.getY() + ChatFormatting.GRAY + ", " + ChatFormatting.GREEN + "Z: " + packet.getZ() + ChatFormatting.GRAY + "!" +
        			ChatFormatting.RESET);
                }
        	}
    	}

    });

}
